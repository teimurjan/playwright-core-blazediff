{
  "version": 3,
  "sources": ["../../../src/server/recorder/throttledFile.ts"],
  "sourcesContent": ["/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\n\nexport class ThrottledFile {\n  private _file: string;\n  private _timer: NodeJS.Timeout | undefined;\n  private _text: string | undefined;\n\n  constructor(file: string) {\n    this._file = file;\n  }\n\n  setContent(text: string) {\n    this._text = text;\n    if (!this._timer)\n      this._timer = setTimeout(() => this.flush(), 250);\n  }\n\n  flush(): void {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = undefined;\n    }\n    if (this._text)\n      fs.writeFileSync(this._file, this._text);\n    this._text = undefined;\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA,gBAAe;AAER,MAAM,cAAc;AAAA,EAKzB,YAAY,MAAc;AACxB,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,WAAW,MAAc;AACvB,SAAK,QAAQ;AACb,QAAI,CAAC,KAAK;AACR,WAAK,SAAS,WAAW,MAAM,KAAK,MAAM,GAAG,GAAG;AAAA,EACpD;AAAA,EAEA,QAAc;AACZ,QAAI,KAAK,QAAQ;AACf,mBAAa,KAAK,MAAM;AACxB,WAAK,SAAS;AAAA,IAChB;AACA,QAAI,KAAK;AACP,gBAAAA,QAAG,cAAc,KAAK,OAAO,KAAK,KAAK;AACzC,SAAK,QAAQ;AAAA,EACf;AACF;",
  "names": ["fs"]
}
